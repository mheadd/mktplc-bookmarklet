var AppApi=function(){};
AppApi.prototype={request:Request,time:Time,db:DB,init:function(a){this.appID=Crossrider.appID;this.cr_version=Crossrider.manifest.version;this.version=Crossrider.manifest.ver;this.platform=Crossrider.manifest.platform;this._cookies=a;this.manifest=Crossrider.manifest;this.db.init(this);this.cookie=new Cookie(this);this.push=new Push(this);this.chrome=new ChromeAPI(this);this.browserAction=this.chrome.browserAction;this.message=new Message;this.analytics=new Analytics(this);this.debug=new Debugger;
this.installer=new Installer(this);this.appInfo=new AppInfo(this)},dom:{addInlineCSS:function(a){chrome.tabs.getSelected(null,function(b){b&&chrome.tabs.sendRequest(b.id,{action:"addInlineCSS",params:[a]},function(){})})},addRemoteCSS:function(a){chrome.tabs.getSelected(null,function(b){b&&chrome.tabs.sendRequest(b.id,{action:"addRemoteCSS",params:[a]},function(){})})},addInlineJS:function(a){chrome.tabs.getSelected(null,function(b){b&&chrome.tabs.sendRequest(b.id,{action:"addInlineJS",params:[a]},
function(){})})},addRemoteJS:function(a){chrome.tabs.getSelected(null,function(b){b&&chrome.tabs.sendRequest(b.id,{action:"addRemoteJS",params:[a]},function(){})})}},openURL:function(a,b){Crossrider.openURL(a,b)},superAlert:function(a){Crossrider.superAlert(a)},updateCookie:function(a,b){this._cookies[a]={value:b.value,expires:b.expires instanceof Date?b.expires:new Date(b.expires)}},unsetCookie:function(a){this._cookies[a]&&delete this._cookies[a]},updateRealCookie:function(a,b){this._cookies.mysite[a]=
{value:b.value,expires:b.expires instanceof Date?b.expires:new Date(b.expires)}},unsetRealCookie:function(a){this._cookies.mysite[a]&&delete this._cookies.mysite[a]},callPageFunction:function(a){document.location.apply("javascript:"+a+"()")},isDebugMode:function(){return Crossrider.debug},getCrossriderID:function(){return Crossrider._bic},background:{reload:function(){Crossrider.reload()}}};